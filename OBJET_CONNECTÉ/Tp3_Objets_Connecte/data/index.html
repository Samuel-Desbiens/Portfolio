<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Données PM25 - RevolvAir.org</title>
  <link rel="stylesheet" href="style.css">
  <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
</head>
<body>
<h1>RevolvAir.org</h1>
<h3>The air you breathe</h3>
<div>
<ul class="menu">
  <li><a href="/">Qualité de L'air</a></li>
  <li><a href="/info.html">Information de l'appareil</a></li>
</ul>
</div>

<h2>Current values</h2>

<h2>PM2.5 realtime value (ug/m<sup>3</sup>)</h2>
<h2 id="PMSValue">No Value (Yet)</h2>

<h2>Label</h2>
<h2 id="label">No Value (Yet)</h2>

<h2>Color</h2>
<h2 id="color">No Value (Yet)</h2>

<h2>HealthEffect</h2>
<h2 id="healtheffect">No Value (Yet)</h2>

<h2>Note</h2>
<h2 id="note">No Value (Yet)</h2>

<script>
    setInterval(function() { update(); }, 5000);
    function update(){
      handleAirQuality();
      handleLabel();
      handleColor();
      handleHealthEffect();
      handleNote();
    }
    function handleAirQuality() {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          document.getElementById("PMSValue").innerHTML = this.responseText;
        }
      };
      xhttp.open("GET", "/handlepm2p5", true);
      xhttp.send();
    }
    function handleLabel() {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          document.getElementById("label").innerHTML = this.responseText;
        }
      };
      xhttp.open("GET", "/handlelabel", true);
      xhttp.send();
    }
    function handleColor() {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          document.getElementById("color").innerHTML = this.responseText;
        }
      };
      xhttp.open("GET", "/handlecolor", true);
      xhttp.send();
    }
    function handleHealthEffect() {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          document.getElementById("healtheffect").innerHTML = this.responseText;
        }
      };
      xhttp.open("GET", "/handlehealtheffect", true);
      xhttp.send();
    }
    function handleNote() {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          document.getElementById("note").innerHTML = this.responseText;
        }
      };
      xhttp.open("GET", "/handlenote", true);
      xhttp.send();
    }
    </script>
    <div class="footer">
      <a href="https://RevolvAir.org">RevolvAir.org</a>
    </div>
    </body>
    </html>
    